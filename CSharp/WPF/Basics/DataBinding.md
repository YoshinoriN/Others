# データバインディング

### バインディングの確立
---
バインディングを確立させるための要素は4つある。

#### 1. バインディングソース
* データを提供する。
* 依存関係プロパティでないといけない。各コントロールの主要プロパティはほぼ依存関係プロパティで宣言されている。

#### 2. バインディングターゲット
* データを反映する。

#### 3. ソースプロパティ
* バインディングソース内の値へのパスを示す。通常はバインディングソースのプロパティ名になることが多い。

#### 4. ターゲットプロパティ
* バインディングターゲットの中で実際に値を反映する先。

```xml
<StackPanel>
    <!--Slider がバインディングソース-->
    <Slider x:Name="Slider" />
    <!--Label がバインディングターゲット-->
    <!--Label.Contetがターゲットプロパティ-->
    <!--Slider.Path がソースプロパティ-->
    <Label Content="{Binding ElementName=Slider, Path=Value}"/>
</StackPanel>
```
このサンプルの場合、「Slider」と「Label」でデータバインディングしている。

データバインディングを確立するためにバインディングオブジェクト(System.Windows.Data.Binding)が作成される。
通常は意識する必要はない。

### バインディングの方向

|モード　　　　　　|意味                                                  |
|---------------|-----------------------------------------------------|
|OneWay         |ソースプロパティ変更時にターゲットプロパティに値を反映。          |
|TwoWay         |ソースプロパティ、ターゲットプロパティに双方向に値を反映。         |
|OneWayToSource |ターゲットプロパティ変更時にソースプロパティに値を反映。           |
|OneTime        |UI初期化時に1度だけソースプロパティの値をターゲットプロパティに反映。|

### プロパティ変更の検知

* TwoWayもしくはOneWayToSourceの時にターゲットプロパティの変更を検知し、ソースプロパティに反映することができる。

例えば、下記の例ではテキストボックスの値を変えた段階で即時にソースプロパティ「Slider」の値が変更される。
```xml
<Grid>
    <StackPanel>
        <Slider x:Name="Slider" />
        <TextBox Text="{Binding ElementName=Slider, Path=Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
    </StackPanel>
</Grid>
```

### 参考記事

> 日経ソフトウェア2015年9月号
